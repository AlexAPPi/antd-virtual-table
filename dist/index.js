import{Empty as e,Table as t}from"antd";import o,{memo as n,createElement as r,PureComponent as i,useRef as l,useState as s,useCallback as a,useMemo as c,useEffect as d}from"react";function u(e,...t){for(let o=0;o<t.length;o++){const n=t[o];"function"==typeof n&&n(e),"object"==typeof n&&(n.current=e)}}const h={}.hasOwnProperty;function f(...e){const t=[];for(let e=0;e<arguments.length;e++){const n=arguments[e];if(!n)continue;const r=typeof n;if("string"===r||"number"===r)t.push(n);else if(Array.isArray(n)){if(n.length){const e=f.apply(null,n);e&&t.push(e)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var o in n)h.call(n,o)&&n[o]&&t.push(o)}}return t.join(" ")}var p=function e(t,o){if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){if(t.constructor!==o.constructor)return!1;var n,r,i;if(Array.isArray(t)){if((n=t.length)!=o.length)return!1;for(r=n;0!=r--;)if(!e(t[r],o[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(o).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(o,i[r]))return!1;for(r=n;0!=r--;){var l=i[r];if(!e(t[l],o[l]))return!1}return!0}return t!=t&&o!=o};const m="virtial-grid-item";const g=n((function(e){const{style:t,column:n,data:r,originalColumnIndex:i,columnIndex:l,rowIndex:s,isScrolling:a}=e,c=r&&r[s],d=n.dataIndex&&c?c[n.dataIndex]:void 0,u=n.onCell&&n.onCell(c,l,a),h=n.render,p=h?h(d,c,l,a):d;return o.createElement("div",{...u,"data-row-index":s,"data-column-index":l,"data-original-column-index":i,style:{...u?.style,...t},className:f(m,u?.className)},p)}),((e,t)=>{if(e.originalColumnIndex!==t.originalColumnIndex||e.columnIndex!==t.columnIndex||e.rowIndex!==t.rowIndex)return!1;if(e.style!==t.style&&!p(e.style,t.style))return!1;const o=t.column.shouldCellUpdate;if(o){const n=e.data;if(!o(t.data,n,t.isScrolling))return!0}return e.data===t.data&&e.column.dataIndex===t.column.dataIndex&&e.column.onCell===t.column.onCell&&e.column.render===t.column.render}));function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},v.apply(this,arguments)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}var C=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function I(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(n=e[o],r=t[o],!(n===r||C(n)&&C(r)))return!1;var n,r;return!0}function S(e,t){var o;void 0===t&&(t=I);var n,r=[],i=!1;return function(){for(var l=[],s=0;s<arguments.length;s++)l[s]=arguments[s];return i&&o===this&&t(l,r)||(n=e.apply(this,l),i=!0,o=this,r=l),n}}var _="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function y(e){cancelAnimationFrame(e.id)}var R=-1;var b=null;function M(e){if(void 0===e&&(e=!1),null===b||e){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",o.direction="rtl";var n=document.createElement("div"),r=n.style;return r.width="100px",r.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?b="positive-descending":(t.scrollLeft=1,b=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),b}return b}var T=150,F=function(e){var t=e.columnIndex;return e.data,e.rowIndex+":"+t},O=null,W=null,P=null;function E(e){var t,o=e.getColumnOffset,n=e.getColumnStartIndexForOffset,l=e.getColumnStopIndexForStartIndex,s=e.getColumnWidth,a=e.getEstimatedTotalHeight,c=e.getEstimatedTotalWidth,d=e.getOffsetForColumnAndAlignment,u=e.getOffsetForRowAndAlignment,h=e.getRowHeight,f=e.getRowOffset,p=e.getRowStartIndexForOffset,m=e.getRowStopIndexForStartIndex,g=e.initInstanceProps,C=e.shouldResetStyleCacheOnItemSizeChange,I=e.validateProps;return t=function(e){var t,i;function b(t){var n;return(n=e.call(this,t)||this)._instanceProps=g(n.props,w(n)),n._resetIsScrollingTimeoutId=null,n._outerRef=void 0,n.state={instance:w(n),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof n.props.initialScrollLeft?n.props.initialScrollLeft:0,scrollTop:"number"==typeof n.props.initialScrollTop?n.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},n._callOnItemsRendered=void 0,n._callOnItemsRendered=S((function(e,t,o,r,i,l,s,a){return n.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:o,overscanRowStopIndex:r,visibleColumnStartIndex:i,visibleColumnStopIndex:l,visibleRowStartIndex:s,visibleRowStopIndex:a})})),n._callOnScroll=void 0,n._callOnScroll=S((function(e,t,o,r,i){return n.props.onScroll({horizontalScrollDirection:o,scrollLeft:e,scrollTop:t,verticalScrollDirection:r,scrollUpdateWasRequested:i})})),n._getItemStyle=void 0,n._getItemStyle=function(e,t){var r,i=n.props,l=i.columnWidth,a=i.direction,c=i.rowHeight,d=n._getItemStyleCache(C&&l,C&&a,C&&c),u=e+":"+t;if(d.hasOwnProperty(u))r=d[u];else{var p=o(n.props,t,n._instanceProps),m="rtl"===a;d[u]=r={position:"absolute",left:m?void 0:p,right:m?p:void 0,top:f(n.props,e,n._instanceProps),height:h(n.props,e,n._instanceProps),width:s(n.props,t,n._instanceProps)}}return r},n._getItemStyleCache=void 0,n._getItemStyleCache=S((function(e,t,o){return{}})),n._onScroll=function(e){var t=e.currentTarget,o=t.clientHeight,r=t.clientWidth,i=t.scrollLeft,l=t.scrollTop,s=t.scrollHeight,a=t.scrollWidth;n.setState((function(e){if(e.scrollLeft===i&&e.scrollTop===l)return null;var t=n.props.direction,c=i;if("rtl"===t)switch(M()){case"negative":c=-i;break;case"positive-descending":c=a-r-i}c=Math.max(0,Math.min(c,a-r));var d=Math.max(0,Math.min(l,s-o));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<i?"forward":"backward",scrollLeft:c,scrollTop:d,verticalScrollDirection:e.scrollTop<l?"forward":"backward",scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){var e,t,o,r;null!==n._resetIsScrollingTimeoutId&&y(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=(e=n._resetIsScrolling,t=T,o=_(),r={id:requestAnimationFrame((function n(){_()-o>=t?e.call(null):r.id=requestAnimationFrame(n)}))})},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1)}))},n}i=e,(t=b).prototype=Object.create(i.prototype),t.prototype.constructor=t,x(t,i),b.getDerivedStateFromProps=function(e,t){return L(e,t),I(e),null};var O=b.prototype;return O.scrollTo=function(e){var t=e.scrollLeft,o=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==o&&(o=Math.max(0,o)),this.setState((function(e){return void 0===t&&(t=e.scrollLeft),void 0===o&&(o=e.scrollTop),e.scrollLeft===t&&e.scrollTop===o?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:o,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<o?"forward":"backward"}}),this._resetIsScrollingDebounced)},O.scrollToItem=function(e){var t=e.align,o=void 0===t?"auto":t,n=e.columnIndex,r=e.rowIndex,i=this.props,l=i.columnCount,s=i.height,h=i.rowCount,f=i.width,p=this.state,m=p.scrollLeft,g=p.scrollTop,v=function(e){if(void 0===e&&(e=!1),-1===R||e){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",document.body.appendChild(t),R=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return R}();void 0!==n&&(n=Math.max(0,Math.min(n,l-1))),void 0!==r&&(r=Math.max(0,Math.min(r,h-1)));var w=a(this.props,this._instanceProps),x=c(this.props,this._instanceProps)>f?v:0,C=w>s?v:0;this.scrollTo({scrollLeft:void 0!==n?d(this.props,n,o,m,this._instanceProps,C):m,scrollTop:void 0!==r?u(this.props,r,o,g,this._instanceProps,x):g})},O.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,o=e.initialScrollTop;if(null!=this._outerRef){var n=this._outerRef;"number"==typeof t&&(n.scrollLeft=t),"number"==typeof o&&(n.scrollTop=o)}this._callPropsCallbacks()},O.componentDidUpdate=function(){var e=this.props.direction,t=this.state,o=t.scrollLeft,n=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var r=this._outerRef;if("rtl"===e)switch(M()){case"negative":r.scrollLeft=-o;break;case"positive-ascending":r.scrollLeft=o;break;default:var i=r.clientWidth,l=r.scrollWidth;r.scrollLeft=l-i-o}else r.scrollLeft=Math.max(0,o);r.scrollTop=Math.max(0,n)}this._callPropsCallbacks()},O.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&y(this._resetIsScrollingTimeoutId)},O.render=function(){var e=this.props,t=e.children,o=e.className,n=e.columnCount,i=e.direction,l=e.height,s=e.innerRef,d=e.innerElementType,u=e.innerTagName,h=e.itemData,f=e.itemKey,p=void 0===f?F:f,m=e.outerElementType,g=e.outerTagName,w=e.rowCount,x=e.style,C=e.useIsScrolling,I=e.width,S=this.state.isScrolling,_=this._getHorizontalRangeToRender(),y=_[0],R=_[1],b=this._getVerticalRangeToRender(),M=b[0],T=b[1],O=[];if(n>0&&w)for(var W=M;W<=T;W++)for(var P=y;P<=R;P++)O.push(r(t,{columnIndex:P,data:h,isScrolling:C?S:void 0,key:p({columnIndex:P,data:h,rowIndex:W}),rowIndex:W,style:this._getItemStyle(W,P)}));var E=a(this.props,this._instanceProps),L=c(this.props,this._instanceProps);return r(m||g||"div",{className:o,onScroll:this._onScroll,ref:this._outerRefSetter,style:v({position:"relative",height:l,width:I,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},x)},r(d||u||"div",{children:O,ref:s,style:{height:E,pointerEvents:S?"none":void 0,width:L}}))},O._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,o=e.onItemsRendered,n=e.onScroll,r=e.rowCount;if("function"==typeof o&&t>0&&r>0){var i=this._getHorizontalRangeToRender(),l=i[0],s=i[1],a=i[2],c=i[3],d=this._getVerticalRangeToRender(),u=d[0],h=d[1],f=d[2],p=d[3];this._callOnItemsRendered(l,s,u,h,a,c,f,p)}if("function"==typeof n){var m=this.state,g=m.horizontalScrollDirection,v=m.scrollLeft,w=m.scrollTop,x=m.scrollUpdateWasRequested,C=m.verticalScrollDirection;this._callOnScroll(v,w,g,C,x)}},O._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,o=e.overscanColumnCount,r=e.overscanColumnsCount,i=e.overscanCount,s=e.rowCount,a=this.state,c=a.horizontalScrollDirection,d=a.isScrolling,u=a.scrollLeft,h=o||r||i||1;if(0===t||0===s)return[0,0,0,0];var f=n(this.props,u,this._instanceProps),p=l(this.props,f,u,this._instanceProps),m=d&&"backward"!==c?1:Math.max(1,h),g=d&&"forward"!==c?1:Math.max(1,h);return[Math.max(0,f-m),Math.max(0,Math.min(t-1,p+g)),f,p]},O._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,o=e.overscanCount,n=e.overscanRowCount,r=e.overscanRowsCount,i=e.rowCount,l=this.state,s=l.isScrolling,a=l.verticalScrollDirection,c=l.scrollTop,d=n||r||o||1;if(0===t||0===i)return[0,0,0,0];var u=p(this.props,c,this._instanceProps),h=m(this.props,u,c,this._instanceProps),f=s&&"backward"!==a?1:Math.max(1,d),g=s&&"forward"!==a?1:Math.max(1,d);return[Math.max(0,u-f),Math.max(0,Math.min(i-1,h+g)),u,h]},b}(i),t.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}"production"!==process.env.NODE_ENV&&"undefined"!=typeof window&&void 0!==window.WeakSet&&(O=new WeakSet,W=new WeakSet,P=new WeakSet);var L=function(e,t){var o=e.children,n=e.direction,r=e.height,i=e.innerTagName,l=e.outerTagName,s=e.overscanColumnsCount,a=e.overscanCount,c=e.overscanRowsCount,d=e.width,u=t.instance;if("production"!==process.env.NODE_ENV){if("number"==typeof a&&O&&!O.has(u)&&(O.add(u),console.warn("The overscanCount prop has been deprecated. Please use the overscanColumnCount and overscanRowCount props instead.")),"number"!=typeof s&&"number"!=typeof c||W&&!W.has(u)&&(W.add(u),console.warn("The overscanColumnsCount and overscanRowsCount props have been deprecated. Please use the overscanColumnCount and overscanRowCount props instead.")),null==i&&null==l||P&&!P.has(u)&&(P.add(u),console.warn("The innerTagName and outerTagName props have been deprecated. Please use the innerElementType and outerElementType props instead.")),null==o)throw Error('An invalid "children" prop has been specified. Value should be a React component. "'+(null===o?"null":typeof o)+'" was specified.');switch(n){case"ltr":case"rtl":break;default:throw Error('An invalid "direction" prop has been specified. Value should be either "ltr" or "rtl". "'+n+'" was specified.')}if("number"!=typeof d)throw Error('An invalid "width" prop has been specified. Grids must specify a number for width. "'+(null===d?"null":typeof d)+'" was specified.');if("number"!=typeof r)throw Error('An invalid "height" prop has been specified. Grids must specify a number for height. "'+(null===r?"null":typeof r)+'" was specified.')}},z=function(e,t){var o=e.rowCount,n=t.rowMetadataMap,r=t.estimatedRowHeight,i=t.lastMeasuredRowIndex,l=0;if(i>=o&&(i=o-1),i>=0){var s=n[i];l=s.offset+s.size}return l+(o-i-1)*r},N=function(e,t){var o=e.columnCount,n=t.columnMetadataMap,r=t.estimatedColumnWidth,i=t.lastMeasuredColumnIndex,l=0;if(i>=o&&(i=o-1),i>=0){var s=n[i];l=s.offset+s.size}return l+(o-i-1)*r},D=function(e,t,o,n){var r,i,l;if("column"===e?(r=n.columnMetadataMap,i=t.columnWidth,l=n.lastMeasuredColumnIndex):(r=n.rowMetadataMap,i=t.rowHeight,l=n.lastMeasuredRowIndex),o>l){var s=0;if(l>=0){var a=r[l];s=a.offset+a.size}for(var c=l+1;c<=o;c++){var d=i(c);r[c]={offset:s,size:d},s+=d}"column"===e?n.lastMeasuredColumnIndex=o:n.lastMeasuredRowIndex=o}return r[o]},H=function(e,t,o,n){var r,i;return"column"===e?(r=o.columnMetadataMap,i=o.lastMeasuredColumnIndex):(r=o.rowMetadataMap,i=o.lastMeasuredRowIndex),(i>0?r[i].offset:0)>=n?k(e,t,o,i,0,n):A(e,t,o,Math.max(0,i),n)},k=function(e,t,o,n,r,i){for(;r<=n;){var l=r+Math.floor((n-r)/2),s=D(e,t,l,o).offset;if(s===i)return l;s<i?r=l+1:s>i&&(n=l-1)}return r>0?r-1:0},A=function(e,t,o,n,r){for(var i="column"===e?t.columnCount:t.rowCount,l=1;n<i&&D(e,t,n,o).offset<r;)n+=l,l*=2;return k(e,t,o,Math.min(n,i-1),Math.floor(n/2),r)},j=function(e,t,o,n,r,i,l){var s="column"===e?t.width:t.height,a=D(e,t,o,i),c="column"===e?N(t,i):z(t,i),d=Math.max(0,Math.min(c-s,a.offset)),u=Math.max(0,a.offset-s+l+a.size);switch("smart"===n&&(n=r>=u-s&&r<=d+s?"auto":"center"),n){case"start":return d;case"end":return u;case"center":return Math.round(u+(d-u)/2);default:return r>=u&&r<=d?r:u>d||r<u?u:d}},U=E({getColumnOffset:function(e,t,o){return D("column",e,t,o).offset},getColumnStartIndexForOffset:function(e,t,o){return H("column",e,o,t)},getColumnStopIndexForStartIndex:function(e,t,o,n){for(var r=e.columnCount,i=e.width,l=D("column",e,t,n),s=o+i,a=l.offset+l.size,c=t;c<r-1&&a<s;)c++,a+=D("column",e,c,n).size;return c},getColumnWidth:function(e,t,o){return o.columnMetadataMap[t].size},getEstimatedTotalHeight:z,getEstimatedTotalWidth:N,getOffsetForColumnAndAlignment:function(e,t,o,n,r,i){return j("column",e,t,o,n,r,i)},getOffsetForRowAndAlignment:function(e,t,o,n,r,i){return j("row",e,t,o,n,r,i)},getRowOffset:function(e,t,o){return D("row",e,t,o).offset},getRowHeight:function(e,t,o){return o.rowMetadataMap[t].size},getRowStartIndexForOffset:function(e,t,o){return H("row",e,o,t)},getRowStopIndexForStartIndex:function(e,t,o,n){for(var r=e.rowCount,i=e.height,l=D("row",e,t,n),s=o+i,a=l.offset+l.size,c=t;c<r-1&&a<s;)c++,a+=D("row",e,c,n).size;return c},initInstanceProps:function(e,t){var o=e,n={columnMetadataMap:{},estimatedColumnWidth:o.estimatedColumnWidth||50,estimatedRowHeight:o.estimatedRowHeight||50,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return t.resetAfterColumnIndex=function(e,o){void 0===o&&(o=!0),t.resetAfterIndices({columnIndex:e,shouldForceUpdate:o})},t.resetAfterRowIndex=function(e,o){void 0===o&&(o=!0),t.resetAfterIndices({rowIndex:e,shouldForceUpdate:o})},t.resetAfterIndices=function(e){var o=e.columnIndex,r=e.rowIndex,i=e.shouldForceUpdate,l=void 0===i||i;"number"==typeof o&&(n.lastMeasuredColumnIndex=Math.min(n.lastMeasuredColumnIndex,o-1)),"number"==typeof r&&(n.lastMeasuredRowIndex=Math.min(n.lastMeasuredRowIndex,r-1)),t._getItemStyleCache(-1),l&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){var t=e.columnWidth,o=e.rowHeight;if("production"!==process.env.NODE_ENV){if("function"!=typeof t)throw Error('An invalid "columnWidth" prop has been specified. Value should be a function. "'+(null===t?"null":typeof t)+'" was specified.');if("function"!=typeof o)throw Error('An invalid "rowHeight" prop has been specified. Value should be a function. "'+(null===o?"null":typeof o)+'" was specified.')}}});process.env.NODE_ENV;let V=-1;function G(e=!1){if(-1===V||e){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",document.body.appendChild(e),V=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return V}const q=({columnIndex:e,data:t,rowIndex:o})=>`${o}:${e}`,$=(e,t,o,n)=>{let r,i,l;if("column"===e?(r=n.columnMetadataMap,i=t.columnWidth,l=n.lastMeasuredColumnIndex):(r=n.rowMetadataMap,i=t.rowHeight,l=n.lastMeasuredRowIndex),o>l){let t=0;if(l>=0){const e=r[l];t=e.offset+e.size}for(let e=l+1;e<=o;e++){let o=i(e);r[e]={offset:t,size:o},t+=o}"column"===e?n.lastMeasuredColumnIndex=o:n.lastMeasuredRowIndex=o}return r[o]},K=({rowCount:e},{rowMetadataMap:t,estimatedRowHeight:o,lastMeasuredRowIndex:n})=>{let r=0;if(n>=e&&(n=e-1),n>=0){const e=t[n];r=e.offset+e.size}return r+(e-n-1)*o},B=({columnCount:e},{columnMetadataMap:t,estimatedColumnWidth:o,lastMeasuredColumnIndex:n})=>{let r=0;if(n>=e&&(n=e-1),n>=0){const e=t[n];r=e.offset+e.size}return r+(e-n-1)*o},J=(e,t,o,n,r,i,l,s,a)=>{const c="column"===e?s:0,d="column"===e?a:0,u="column"===e?t.width:t.height,h=$(e,t,o,i),f="column"===e?B(t,i):K(t,i),p=Math.max(0,Math.min(f-u+c,h.offset-c)),m=Math.max(0,h.offset+h.size-u+d+l);switch("smart"===n&&(n=r>=m-u&&r<=p+u?"auto":"center"),n){case"start":return p;case"end":return m;case"center":return Math.round(m+(p-m)/2);default:return r>=m&&r<=p?r:m>p||r<m?m:p}},Q=(e,t,o,n,r,i,l,s)=>J("column",e,t,o,n,r,i,l,s),X=(e,t,o,n,r,i,l,s)=>J("row",e,t,o,n,r,i,l,s),Y=(e,t,o)=>$("row",e,t,o).offset,Z=(e,t,o)=>o.columnMetadataMap[t].size,ee=(e,t,o)=>$("column",e,t,o).size;class te extends U{constructor(e){super(e),this._leftFixedColumnsWidth=0,this._rightFixedColumnsWidth=0,this._lastLeftFixedColumn=0,this._firstRightFixedColumn=0,this._updateFixedColumnsVars()}_updateFixedColumnsVars(){const{columnCount:e,columnGetter:t}=this.props,o=e;this._lastLeftFixedColumn=0,this._firstRightFixedColumn=e-1,this._leftFixedColumnsWidth=0,this._rightFixedColumnsWidth=0,this._lastFixedRenderedContent=void 0,this._lastFixedRenderedRowStartIndex=void 0,this._lastFixedRenderedRowStopIndex=void 0;for(let e=0;e<o;e++){let o=t(e);if("left"!==o.fixed&&!0!==o.fixed)break;this._lastLeftFixedColumn++,this._leftFixedColumnsWidth+=ee(this.props,e,this._instanceProps)}for(let e=o-1;e>-1;e--){if("right"!==t(e).fixed)break;this._firstRightFixedColumn--,this._rightFixedColumnsWidth+=ee(this.props,e,this._instanceProps)}}_renderFixedColumns(e,t,n=!1){const{rerenderFixedColumnOnHorizontalScroll:i}=this.props;if(!1===i&&!1===n&&this._lastFixedRenderedRowStartIndex===e&&this._lastFixedRenderedRowStopIndex===t)return this._lastFixedRenderedContent;const{width:l,height:s,children:a,itemData:c,columnCount:d,useIsScrolling:u,itemKey:h=q,scrollbarSize:f=G()}=this.props,{isScrolling:p}=this.state,m=[],g=K(this.props,this._instanceProps)>=s?l-f:l,v=t-e+1;if(this._leftFixedColumnsWidth>0||this._rightFixedColumnsWidth>0)for(let t=0;t<v;t++){const n=[],i=[],l=e+t,s=(this.props,w=l,this._instanceProps.rowMetadataMap[w].size),f=0===t?Y(this.props,l,this._instanceProps):void 0;for(let e=0;e<this._lastLeftFixedColumn;e++){const o=Z(this.props,e,this._instanceProps),i=r(a,{key:h({columnIndex:e,data:c,rowIndex:l}),rowIndex:l,columnIndex:e,data:c,isScrolling:u?p:void 0,style:{marginLeft:0===t?0:void 0,marginTop:f,width:o,height:s}});n.push(i)}for(let e=this._firstRightFixedColumn;e<d;e++){const o=Z(this.props,e,this._instanceProps),n=r(a,{key:h({columnIndex:e,data:c,rowIndex:l}),rowIndex:l,columnIndex:e,data:c,isScrolling:u?p:void 0,style:{marginLeft:0===t?0:void 0,marginTop:f,width:o,height:s}});i.push(n)}(n.length>0||i.length>0)&&m.push(o.createElement("div",{key:`fixed-row-${l}`,"row-index":l,className:"fixed-virtial-grid-row",style:{width:g}},n.length>0&&o.createElement("div",{className:"fixed-virtial-grid-row-left-columns"},n),i.length>0&&o.createElement("div",{className:"fixed-virtial-grid-row-right-columns"},i)))}var w;return this._lastFixedRenderedRowStartIndex=e,this._lastFixedRenderedRowStopIndex=t,this._lastFixedRenderedContent=m,this._lastFixedRenderedContent}scrollToItem({align:e,rowIndex:t,columnIndex:o}){const{columnCount:n,height:r,rowCount:i,width:l}=this.props,{scrollLeft:s,scrollTop:a}=this.state,{scrollbarSize:c=G()}=this.props;void 0!==o&&(o=Math.max(0,Math.min(o,n-1))),void 0!==t&&(t=Math.max(0,Math.min(t,i-1)));const d=K(this.props,this._instanceProps),u=B(this.props,this._instanceProps)>l?c:0,h=d>r?c:0;this.scrollTo({scrollLeft:void 0!==o?Q(this.props,o,e,s,this._instanceProps,h,this._leftFixedColumnsWidth,this._rightFixedColumnsWidth):s,scrollTop:void 0!==t?X(this.props,t,e,a,this._instanceProps,u,this._leftFixedColumnsWidth,this._rightFixedColumnsWidth):a})}render(){const{children:e,className:t,columnCount:o,direction:n,height:i,innerRef:l,innerElementType:s,innerTagName:a,itemData:c,itemKey:d=q,outerElementType:u,outerTagName:h,rowCount:p,style:m,useIsScrolling:g,width:v,columnGetter:w}=this.props,{isScrolling:x}=this.state,[C,I]=this._getHorizontalRangeToRender(),[S,_]=this._getVerticalRangeToRender(),y=[];if(o>0&&p){let t=C,o=I;for(let e=C;e<=I;e++){let n=w(e);"left"===n.fixed||!0===n.fixed?t++:"right"===n.fixed&&o--}for(let n=S;n<=_;n++)for(let i=t;i<=o;i++)y.push(r(e,{columnIndex:i,data:c,isScrolling:g?x:void 0,key:d({columnIndex:i,data:c,rowIndex:n}),rowIndex:n,style:this._getItemStyle(n,i)}));const n=this._renderFixedColumns(S,_);n&&y.push(n)}const R=K(this.props,this._instanceProps),b=B(this.props,this._instanceProps),M=this._leftFixedColumnsWidth>0,T=this._rightFixedColumnsWidth>0;return r(u||h||"div",{className:f(t,{"has-fixed-left-column":M,"has-fixed-right-column":T}),onScroll:this._onScroll,ref:this._outerRefSetter,style:{position:"relative",height:i,width:v,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:n,...m}},r(s||a||"div",{children:y,ref:l,style:{height:R,pointerEvents:x?"none":void 0,width:b}}))}componentDidUpdate(e,t,o){super.componentDidUpdate(e,t,o),e.columnGetter===this.props.columnGetter&&e.columnCount===this.props.columnCount&&e.columnWidth===this.props.columnWidth||this._updateFixedColumnsVars()}}const oe=({scroll:t,gridRef:n,outerGridRef:r,rowHeight:i,columns:l,connectObject:s,normalizeColumns:a,normalizeIndexes:c,rerenderFixedColumnOnHorizontalScroll:d,getColumn:h,rowHeightGetter:f,cellRender:p,onScroll:m})=>(g,v)=>{const{scrollbarSize:w,ref:x,onScroll:C}=v,I=g.length*i;u(s,x);const S=e=>{const o=a[e],{width:n,overlap:r}=o;if(r&&r>0){let t=n,o=c[e];for(let e=1;e<r;e++)o++,t+=l[o].width;return o===l.length-1?t-w:t}return I>=t.y&&e===a.length-1?n-w:n},_=function(e,t){if((o=e)&&"[object Function]"==={}.toString.call(o)){let o=0;for(;t-- >0;)o+=e(t);return o}var o;return(t+1)*e-e}(S,a.length-1);return o.createElement("div",{className:"virtual-grid-wrap"},(!g||0==g.length)&&o.createElement("div",{className:"virtual-grid-empty"},o.createElement(e,{image:e.PRESENTED_IMAGE_SIMPLE})),o.createElement(te,{useIsScrolling:!0,ref:e=>{u(e,n)},estimatedColumnWidth:_/a.length,estimatedRowHeight:i,outerRef:r,className:"virtual-grid",width:t.x,height:t.y,columnCount:a.length,rowCount:g.length,rowHeight:f,columnWidth:S,itemData:g,columnGetter:h,rerenderFixedColumnOnHorizontalScroll:d,onScroll:e=>{C({scrollLeft:e.scrollLeft}),m&&m(e)}},p))};function ne(e){const{className:n,columns:r,rowHeight:i,scroll:h,gridRef:p,outerGridRef:m,onScroll:v,onChange:w,rerenderFixedColumnOnHorizontalScroll:x}=e,C=l(null),I=l(null),[S]=s((()=>({get scrollLeft(){return I.current?I.current?.state.scrollLeft:0},set scrollLeft(e){const t=I.current?.state.scrollLeft;t!=e&&I.current&&I.current.scrollTo({scrollLeft:e})}}))),_=a((e=>{if(e){const t=e.querySelectorAll(".ant-table .ant-table-header .ant-table-thead .ant-table-cell");let o=0;for(let e=0;e<t.length;e++){const n=t[e];if(!n.classList.contains("ant-table-cell-fix-left"))break;n.style.left=`${o}px`;o+=n.getBoundingClientRect().width}let n=0;for(let e=t.length-1;e>-1;e--){const o=t[e];if(!o.classList.contains("ant-table-cell-fix-right"))break;o.style.right=`${n}px`;n+=o.getBoundingClientRect().width}}}),[h.x,h.y,h.scrollToFirstRowOnChange]),y=a(((e=0,t=0)=>{_(C.current),h.scrollToFirstRowOnChange&&(S.scrollLeft=0),I.current?.resetAfterIndices({columnIndex:e,rowIndex:t,shouldForceUpdate:!0})}),[S,_]),R=a(((e,t,o,n)=>{_(C.current),w&&w(e,t,o,n),h.scrollToFirstRowOnChange&&y()}),[w,_,y]),[b,M,T,F]=c((()=>{let e=0;const t=[],n=[];r.forEach(((o,r)=>{e>1?e--:(e=o.overlap??0,t.push(o),n.push(r))}));return[t,n,e=>t[e],e=>{const{columnIndex:r,data:i}=e,l=n[r],s=t[r];return o.createElement(g,{...e,originalColumnIndex:l,column:s,data:i})}]}),[r]),O=a((()=>i),[i]),W=oe({scroll:h,gridRef:e=>{u(e,I,p)},outerGridRef:m,rowHeight:i,columns:r,connectObject:S,normalizeColumns:b,normalizeIndexes:M,rerenderFixedColumnOnHorizontalScroll:x,getColumn:T,rowHeightGetter:O,cellRender:F,onScroll:v});return d((()=>y()),[h.x,r]),d((()=>y(r.length>0?r.length-2:0)),[h.y]),o.createElement(t,{...e,ref:e=>{u(e,C),_(e)},className:f("virtual-table",n),components:{body:W},onChange:R})}export{te as Grid,ne as VirtualTable,ne as default};
//# sourceMappingURL=index.js.map
