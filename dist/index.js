import e,{memo as t,createElement as n,PureComponent as o,useRef as r,useState as i,useCallback as l,useMemo as s,useEffect as a}from"react";import{ConfigProvider as c,Empty as u,Table as d}from"antd";let h=-1;function f(e=!1){if(-1===h||e){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",document.body.appendChild(e),h=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return h}function p(e){return"function"==typeof e||e&&"[object Function]"==={}.toString.call(e)}function m(e,...t){for(let n=0;n<t.length;n++){const o=t[n];"function"==typeof o&&o(e),"object"==typeof o&&(o.current=e)}}function g(...e){return t=>m(t,...e)}const v={}.hasOwnProperty;function w(...e){const t=[];for(let e=0;e<arguments.length;e++){const o=arguments[e];if(!o)continue;const r=typeof o;if("string"===r||"number"===r)t.push(o);else if(Array.isArray(o)){if(o.length){const e=w.apply(null,o);e&&t.push(e)}}else if("object"===r){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){t.push(o.toString());continue}for(var n in o)v.call(o,n)&&o[n]&&t.push(n)}}return t.join(" ")}var x=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var o,r,i;if(Array.isArray(t)){if((o=t.length)!=n.length)return!1;for(r=o;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((o=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=o;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=o;0!=r--;){var l=i[r];if(!e(t[l],n[l]))return!1}return!0}return t!=t&&n!=n};const C="virtial-grid-item",I=({columnIndex:e,data:t,rowIndex:n})=>`${n}:${e}`;const S=t((function(t){const{style:n,column:o,data:r,originalColumnIndex:i,columnIndex:l,rowIndex:s,isScrolling:a}=t,c=r&&r[s],u=o.dataIndex&&c?c[o.dataIndex]:void 0,d=o.onCell&&o.onCell(c,l,a),h=o.render,f=h?h(u,c,l,a):u;return e.createElement("div",{...d,"data-row-index":s,"data-column-index":l,"data-original-column-index":i,style:{...d?.style,...n},className:w(C,d?.className)},f)}),((e,t)=>{if(e.originalColumnIndex!==t.originalColumnIndex||e.columnIndex!==t.columnIndex||e.rowIndex!==t.rowIndex)return!1;if(e.style!==t.style&&!x(e.style,t.style))return!1;const n=t.column.shouldCellUpdate;if(n){const o=e.data;if(!n(t.data,o,t.isScrolling))return!0}return e.data===t.data&&e.column.dataIndex===t.column.dataIndex&&e.column.onCell===t.column.onCell&&e.column.render===t.column.render}));function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y.apply(this,arguments)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}var b=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function M(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(o=e[n],r=t[n],!(o===r||b(o)&&b(r)))return!1;var o,r;return!0}function T(e,t){var n;void 0===t&&(t=M);var o,r=[],i=!1;return function(){for(var l=[],s=0;s<arguments.length;s++)l[s]=arguments[s];return i&&n===this&&t(l,r)||(o=e.apply(this,l),i=!0,n=this,r=l),o}}var F="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function O(e){cancelAnimationFrame(e.id)}var W=-1;var E=null;function P(e){if(void 0===e&&(e=!1),null===E||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var o=document.createElement("div"),r=o.style;return r.width="100px",r.height="100px",t.appendChild(o),document.body.appendChild(t),t.scrollLeft>0?E="positive-descending":(t.scrollLeft=1,E=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),E}return E}var L=150,N=function(e){var t=e.columnIndex;return e.data,e.rowIndex+":"+t},z=null,D=null,k=null;function A(e){var t,r=e.getColumnOffset,i=e.getColumnStartIndexForOffset,l=e.getColumnStopIndexForStartIndex,s=e.getColumnWidth,a=e.getEstimatedTotalHeight,c=e.getEstimatedTotalWidth,u=e.getOffsetForColumnAndAlignment,d=e.getOffsetForRowAndAlignment,h=e.getRowHeight,f=e.getRowOffset,p=e.getRowStartIndexForOffset,m=e.getRowStopIndexForStartIndex,g=e.initInstanceProps,v=e.shouldResetStyleCacheOnItemSizeChange,w=e.validateProps;return t=function(e){var t,o;function x(t){var n;return(n=e.call(this,t)||this)._instanceProps=g(n.props,_(n)),n._resetIsScrollingTimeoutId=null,n._outerRef=void 0,n.state={instance:_(n),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof n.props.initialScrollLeft?n.props.initialScrollLeft:0,scrollTop:"number"==typeof n.props.initialScrollTop?n.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},n._callOnItemsRendered=void 0,n._callOnItemsRendered=T((function(e,t,o,r,i,l,s,a){return n.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:o,overscanRowStopIndex:r,visibleColumnStartIndex:i,visibleColumnStopIndex:l,visibleRowStartIndex:s,visibleRowStopIndex:a})})),n._callOnScroll=void 0,n._callOnScroll=T((function(e,t,o,r,i){return n.props.onScroll({horizontalScrollDirection:o,scrollLeft:e,scrollTop:t,verticalScrollDirection:r,scrollUpdateWasRequested:i})})),n._getItemStyle=void 0,n._getItemStyle=function(e,t){var o,i=n.props,l=i.columnWidth,a=i.direction,c=i.rowHeight,u=n._getItemStyleCache(v&&l,v&&a,v&&c),d=e+":"+t;if(u.hasOwnProperty(d))o=u[d];else{var p=r(n.props,t,n._instanceProps),m="rtl"===a;u[d]=o={position:"absolute",left:m?void 0:p,right:m?p:void 0,top:f(n.props,e,n._instanceProps),height:h(n.props,e,n._instanceProps),width:s(n.props,t,n._instanceProps)}}return o},n._getItemStyleCache=void 0,n._getItemStyleCache=T((function(e,t,n){return{}})),n._onScroll=function(e){var t=e.currentTarget,o=t.clientHeight,r=t.clientWidth,i=t.scrollLeft,l=t.scrollTop,s=t.scrollHeight,a=t.scrollWidth;n.setState((function(e){if(e.scrollLeft===i&&e.scrollTop===l)return null;var t=n.props.direction,c=i;if("rtl"===t)switch(P()){case"negative":c=-i;break;case"positive-descending":c=a-r-i}c=Math.max(0,Math.min(c,a-r));var u=Math.max(0,Math.min(l,s-o));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<i?"forward":"backward",scrollLeft:c,scrollTop:u,verticalScrollDirection:e.scrollTop<l?"forward":"backward",scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){var e,t,o,r;null!==n._resetIsScrollingTimeoutId&&O(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=(e=n._resetIsScrolling,t=L,o=F(),r={id:requestAnimationFrame((function n(){F()-o>=t?e.call(null):r.id=requestAnimationFrame(n)}))})},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1)}))},n}o=e,(t=x).prototype=Object.create(o.prototype),t.prototype.constructor=t,R(t,o),x.getDerivedStateFromProps=function(e,t){return H(e,t),w(e),null};var C=x.prototype;return C.scrollTo=function(e){var t=e.scrollLeft,n=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==n&&(n=Math.max(0,n)),this.setState((function(e){return void 0===t&&(t=e.scrollLeft),void 0===n&&(n=e.scrollTop),e.scrollLeft===t&&e.scrollTop===n?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:n,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<n?"forward":"backward"}}),this._resetIsScrollingDebounced)},C.scrollToItem=function(e){var t=e.align,n=void 0===t?"auto":t,o=e.columnIndex,r=e.rowIndex,i=this.props,l=i.columnCount,s=i.height,h=i.rowCount,f=i.width,p=this.state,m=p.scrollLeft,g=p.scrollTop,v=function(e){if(void 0===e&&(e=!1),-1===W||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),W=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return W}();void 0!==o&&(o=Math.max(0,Math.min(o,l-1))),void 0!==r&&(r=Math.max(0,Math.min(r,h-1)));var w=a(this.props,this._instanceProps),x=c(this.props,this._instanceProps)>f?v:0,C=w>s?v:0;this.scrollTo({scrollLeft:void 0!==o?u(this.props,o,n,m,this._instanceProps,C):m,scrollTop:void 0!==r?d(this.props,r,n,g,this._instanceProps,x):g})},C.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,n=e.initialScrollTop;if(null!=this._outerRef){var o=this._outerRef;"number"==typeof t&&(o.scrollLeft=t),"number"==typeof n&&(o.scrollTop=n)}this._callPropsCallbacks()},C.componentDidUpdate=function(){var e=this.props.direction,t=this.state,n=t.scrollLeft,o=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var r=this._outerRef;if("rtl"===e)switch(P()){case"negative":r.scrollLeft=-n;break;case"positive-ascending":r.scrollLeft=n;break;default:var i=r.clientWidth,l=r.scrollWidth;r.scrollLeft=l-i-n}else r.scrollLeft=Math.max(0,n);r.scrollTop=Math.max(0,o)}this._callPropsCallbacks()},C.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&O(this._resetIsScrollingTimeoutId)},C.render=function(){var e=this.props,t=e.children,o=e.className,r=e.columnCount,i=e.direction,l=e.height,s=e.innerRef,u=e.innerElementType,d=e.innerTagName,h=e.itemData,f=e.itemKey,p=void 0===f?N:f,m=e.outerElementType,g=e.outerTagName,v=e.rowCount,w=e.style,x=e.useIsScrolling,C=e.width,I=this.state.isScrolling,S=this._getHorizontalRangeToRender(),_=S[0],R=S[1],b=this._getVerticalRangeToRender(),M=b[0],T=b[1],F=[];if(r>0&&v)for(var O=M;O<=T;O++)for(var W=_;W<=R;W++)F.push(n(t,{columnIndex:W,data:h,isScrolling:x?I:void 0,key:p({columnIndex:W,data:h,rowIndex:O}),rowIndex:O,style:this._getItemStyle(O,W)}));var E=a(this.props,this._instanceProps),P=c(this.props,this._instanceProps);return n(m||g||"div",{className:o,onScroll:this._onScroll,ref:this._outerRefSetter,style:y({position:"relative",height:l,width:C,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},w)},n(u||d||"div",{children:F,ref:s,style:{height:E,pointerEvents:I?"none":void 0,width:P}}))},C._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,n=e.onItemsRendered,o=e.onScroll,r=e.rowCount;if("function"==typeof n&&t>0&&r>0){var i=this._getHorizontalRangeToRender(),l=i[0],s=i[1],a=i[2],c=i[3],u=this._getVerticalRangeToRender(),d=u[0],h=u[1],f=u[2],p=u[3];this._callOnItemsRendered(l,s,d,h,a,c,f,p)}if("function"==typeof o){var m=this.state,g=m.horizontalScrollDirection,v=m.scrollLeft,w=m.scrollTop,x=m.scrollUpdateWasRequested,C=m.verticalScrollDirection;this._callOnScroll(v,w,g,C,x)}},C._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,n=e.overscanColumnCount,o=e.overscanColumnsCount,r=e.overscanCount,s=e.rowCount,a=this.state,c=a.horizontalScrollDirection,u=a.isScrolling,d=a.scrollLeft,h=n||o||r||1;if(0===t||0===s)return[0,0,0,0];var f=i(this.props,d,this._instanceProps),p=l(this.props,f,d,this._instanceProps),m=u&&"backward"!==c?1:Math.max(1,h),g=u&&"forward"!==c?1:Math.max(1,h);return[Math.max(0,f-m),Math.max(0,Math.min(t-1,p+g)),f,p]},C._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,n=e.overscanCount,o=e.overscanRowCount,r=e.overscanRowsCount,i=e.rowCount,l=this.state,s=l.isScrolling,a=l.verticalScrollDirection,c=l.scrollTop,u=o||r||n||1;if(0===t||0===i)return[0,0,0,0];var d=p(this.props,c,this._instanceProps),h=m(this.props,d,c,this._instanceProps),f=s&&"backward"!==a?1:Math.max(1,u),g=s&&"forward"!==a?1:Math.max(1,u);return[Math.max(0,d-f),Math.max(0,Math.min(i-1,h+g)),d,h]},x}(o),t.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}"production"!==process.env.NODE_ENV&&"undefined"!=typeof window&&void 0!==window.WeakSet&&(z=new WeakSet,D=new WeakSet,k=new WeakSet);var H=function(e,t){var n=e.children,o=e.direction,r=e.height,i=e.innerTagName,l=e.outerTagName,s=e.overscanColumnsCount,a=e.overscanCount,c=e.overscanRowsCount,u=e.width,d=t.instance;if("production"!==process.env.NODE_ENV){if("number"==typeof a&&z&&!z.has(d)&&(z.add(d),console.warn("The overscanCount prop has been deprecated. Please use the overscanColumnCount and overscanRowCount props instead.")),"number"!=typeof s&&"number"!=typeof c||D&&!D.has(d)&&(D.add(d),console.warn("The overscanColumnsCount and overscanRowsCount props have been deprecated. Please use the overscanColumnCount and overscanRowCount props instead.")),null==i&&null==l||k&&!k.has(d)&&(k.add(d),console.warn("The innerTagName and outerTagName props have been deprecated. Please use the innerElementType and outerElementType props instead.")),null==n)throw Error('An invalid "children" prop has been specified. Value should be a React component. "'+(null===n?"null":typeof n)+'" was specified.');switch(o){case"ltr":case"rtl":break;default:throw Error('An invalid "direction" prop has been specified. Value should be either "ltr" or "rtl". "'+o+'" was specified.')}if("number"!=typeof u)throw Error('An invalid "width" prop has been specified. Grids must specify a number for width. "'+(null===u?"null":typeof u)+'" was specified.');if("number"!=typeof r)throw Error('An invalid "height" prop has been specified. Grids must specify a number for height. "'+(null===r?"null":typeof r)+'" was specified.')}},j=function(e,t){var n=e.rowCount,o=t.rowMetadataMap,r=t.estimatedRowHeight,i=t.lastMeasuredRowIndex,l=0;if(i>=n&&(i=n-1),i>=0){var s=o[i];l=s.offset+s.size}return l+(n-i-1)*r},U=function(e,t){var n=e.columnCount,o=t.columnMetadataMap,r=t.estimatedColumnWidth,i=t.lastMeasuredColumnIndex,l=0;if(i>=n&&(i=n-1),i>=0){var s=o[i];l=s.offset+s.size}return l+(n-i-1)*r},V=function(e,t,n,o){var r,i,l;if("column"===e?(r=o.columnMetadataMap,i=t.columnWidth,l=o.lastMeasuredColumnIndex):(r=o.rowMetadataMap,i=t.rowHeight,l=o.lastMeasuredRowIndex),n>l){var s=0;if(l>=0){var a=r[l];s=a.offset+a.size}for(var c=l+1;c<=n;c++){var u=i(c);r[c]={offset:s,size:u},s+=u}"column"===e?o.lastMeasuredColumnIndex=n:o.lastMeasuredRowIndex=n}return r[n]},q=function(e,t,n,o){var r,i;return"column"===e?(r=n.columnMetadataMap,i=n.lastMeasuredColumnIndex):(r=n.rowMetadataMap,i=n.lastMeasuredRowIndex),(i>0?r[i].offset:0)>=o?G(e,t,n,i,0,o):$(e,t,n,Math.max(0,i),o)},G=function(e,t,n,o,r,i){for(;r<=o;){var l=r+Math.floor((o-r)/2),s=V(e,t,l,n).offset;if(s===i)return l;s<i?r=l+1:s>i&&(o=l-1)}return r>0?r-1:0},$=function(e,t,n,o,r){for(var i="column"===e?t.columnCount:t.rowCount,l=1;o<i&&V(e,t,o,n).offset<r;)o+=l,l*=2;return G(e,t,n,Math.min(o,i-1),Math.floor(o/2),r)},K=function(e,t,n,o,r,i,l){var s="column"===e?t.width:t.height,a=V(e,t,n,i),c="column"===e?U(t,i):j(t,i),u=Math.max(0,Math.min(c-s,a.offset)),d=Math.max(0,a.offset-s+l+a.size);switch("smart"===o&&(o=r>=d-s&&r<=u+s?"auto":"center"),o){case"start":return u;case"end":return d;case"center":return Math.round(d+(u-d)/2);default:return r>=d&&r<=u?r:d>u||r<d?d:u}},B=A({getColumnOffset:function(e,t,n){return V("column",e,t,n).offset},getColumnStartIndexForOffset:function(e,t,n){return q("column",e,n,t)},getColumnStopIndexForStartIndex:function(e,t,n,o){for(var r=e.columnCount,i=e.width,l=V("column",e,t,o),s=n+i,a=l.offset+l.size,c=t;c<r-1&&a<s;)c++,a+=V("column",e,c,o).size;return c},getColumnWidth:function(e,t,n){return n.columnMetadataMap[t].size},getEstimatedTotalHeight:j,getEstimatedTotalWidth:U,getOffsetForColumnAndAlignment:function(e,t,n,o,r,i){return K("column",e,t,n,o,r,i)},getOffsetForRowAndAlignment:function(e,t,n,o,r,i){return K("row",e,t,n,o,r,i)},getRowOffset:function(e,t,n){return V("row",e,t,n).offset},getRowHeight:function(e,t,n){return n.rowMetadataMap[t].size},getRowStartIndexForOffset:function(e,t,n){return q("row",e,n,t)},getRowStopIndexForStartIndex:function(e,t,n,o){for(var r=e.rowCount,i=e.height,l=V("row",e,t,o),s=n+i,a=l.offset+l.size,c=t;c<r-1&&a<s;)c++,a+=V("row",e,c,o).size;return c},initInstanceProps:function(e,t){var n=e,o={columnMetadataMap:{},estimatedColumnWidth:n.estimatedColumnWidth||50,estimatedRowHeight:n.estimatedRowHeight||50,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return t.resetAfterColumnIndex=function(e,n){void 0===n&&(n=!0),t.resetAfterIndices({columnIndex:e,shouldForceUpdate:n})},t.resetAfterRowIndex=function(e,n){void 0===n&&(n=!0),t.resetAfterIndices({rowIndex:e,shouldForceUpdate:n})},t.resetAfterIndices=function(e){var n=e.columnIndex,r=e.rowIndex,i=e.shouldForceUpdate,l=void 0===i||i;"number"==typeof n&&(o.lastMeasuredColumnIndex=Math.min(o.lastMeasuredColumnIndex,n-1)),"number"==typeof r&&(o.lastMeasuredRowIndex=Math.min(o.lastMeasuredRowIndex,r-1)),t._getItemStyleCache(-1),l&&t.forceUpdate()},o},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){var t=e.columnWidth,n=e.rowHeight;if("production"!==process.env.NODE_ENV){if("function"!=typeof t)throw Error('An invalid "columnWidth" prop has been specified. Value should be a function. "'+(null===t?"null":typeof t)+'" was specified.');if("function"!=typeof n)throw Error('An invalid "rowHeight" prop has been specified. Value should be a function. "'+(null===n?"null":typeof n)+'" was specified.')}}});process.env.NODE_ENV;class J extends B{}const Q=({rowCount:e},{rowMetadataMap:t,estimatedRowHeight:n,lastMeasuredRowIndex:o})=>{let r=0;if(o>=e&&(o=e-1),o>=0){const e=t[o];r=e.offset+e.size}return r+(e-o-1)*n},X=({columnCount:e},{columnMetadataMap:t,estimatedColumnWidth:n,lastMeasuredColumnIndex:o})=>{let r=0;if(o>=e&&(o=e-1),o>=0){const e=t[o];r=e.offset+e.size}return r+(e-o-1)*n},Y=(e,t,n,o,r,i,l,s,a)=>{const c="column"===e?s:0,u="column"===e?a:0,d="column"===e?t.width:t.height,h=((e,t,n,o)=>{let r,i,l;if("column"===e?(r=o.columnMetadataMap,i=t.columnWidth,l=o.lastMeasuredColumnIndex):(r=o.rowMetadataMap,i=t.rowHeight,l=o.lastMeasuredRowIndex),n>l){let t=0;if(l>=0){const e=r[l];t=e.offset+e.size}for(let e=l+1;e<=n;e++){let n=i(e);r[e]={offset:t,size:n},t+=n}"column"===e?o.lastMeasuredColumnIndex=n:o.lastMeasuredRowIndex=n}return r[n]})(e,t,n,i),f="column"===e?X(t,i):Q(t,i),p=Math.max(0,Math.min(f-d+c,h.offset-c)),m=Math.max(0,h.offset+h.size-d+u+l);switch("smart"===o&&(o=r>=m-d&&r<=p+d?"auto":"center"),o){case"start":return p;case"end":return m;case"center":return Math.round(m+(p-m)/2);default:return r>=m&&r<=p?r:m>p||r<m?m:p}},Z=(e,t,n,o,r,i,l,s)=>Y("column",e,t,n,o,r,i,l,s),ee=(e,t,n,o,r,i,l,s)=>Y("row",e,t,n,o,r,i,l,s);class te extends J{constructor(e){super(e),this._leftFixedColumnsWidth=0,this._rightFixedColumnsWidth=0,this._firstUnFixedColumn=0,this._firstRightFixedColumn=0,this._updateFixedColumnsVars()}_updateFixedColumnsVars(){const{columnCount:e,columnGetter:t,columnWidth:n}=this.props;this._firstUnFixedColumn=0,this._firstRightFixedColumn=e,this._leftFixedColumnsWidth=0,this._rightFixedColumnsWidth=0,this._lastFixedRenderedContent=void 0,this._lastFixedRenderedRowStartIndex=void 0,this._lastFixedRenderedRowStopIndex=void 0;for(let o=0;o<e;o++){let e=t(o);if("left"!==e.fixed&&!0!==e.fixed)break;this._firstUnFixedColumn++,this._leftFixedColumnsWidth+=n(o)}for(let o=e-1;o>-1;o--){if("right"!==t(o).fixed)break;this._firstRightFixedColumn--,this._rightFixedColumnsWidth+=n(o)}}_renderFixedColumns(e,t,o=!1){const{rerenderFixedColumnOnHorizontalScroll:r,columnWidth:i,rowHeight:l}=this.props;if(!1===r&&!1===o&&this._lastFixedRenderedRowStartIndex===e&&this._lastFixedRenderedRowStopIndex===t&&this._lastFixedRenderedContent)return this._lastFixedRenderedContent;const{children:s,itemData:a,columnCount:c,useIsScrolling:u,itemKey:d=I}=this.props,{isScrolling:h}=this.state,f={},p=t-e+1;if(this._leftFixedColumnsWidth>0||this._rightFixedColumnsWidth>0)for(let t=0;t<p;t++){const o=[],r=[],p=e+t,m=l(p),g=e=>{const t=i(e);return n(s,{key:d({columnIndex:e,data:a,rowIndex:p}),rowIndex:p,columnIndex:e,data:a,isScrolling:u?h:void 0,style:{width:t,height:m}})};for(let e=0;e<this._firstUnFixedColumn;e++){const t=g(e);o.push(t)}for(let e=this._firstRightFixedColumn;e<c;e++){const t=g(e);r.push(t)}(o.length>0||r.length>0)&&(f[p]=[o,r])}return this._lastFixedRenderedRowStartIndex=e,this._lastFixedRenderedRowStopIndex=t,this._lastFixedRenderedContent=f,f}scrollToItem({align:e,rowIndex:t,columnIndex:n}){const{columnCount:o,height:r,rowCount:i,width:l}=this.props,{scrollLeft:s,scrollTop:a}=this.state,{scrollbarSize:c=f()}=this.props;void 0!==n&&(n=Math.max(0,Math.min(n,o-1))),void 0!==t&&(t=Math.max(0,Math.min(t,i-1)));const u=Q(this.props,this._instanceProps),d=X(this.props,this._instanceProps)>l?c:0,h=u>r?c:0;this.scrollTo({scrollLeft:void 0!==n?Z(this.props,n,e,s,this._instanceProps,h,this._leftFixedColumnsWidth,this._rightFixedColumnsWidth):s,scrollTop:void 0!==t?ee(this.props,t,e,a,this._instanceProps,d,this._leftFixedColumnsWidth,this._rightFixedColumnsWidth):a})}render(){const{className:t,columnCount:o,height:r,innerRef:i,innerElementType:l,innerTagName:s,outerElementType:a,outerTagName:c,rowCount:u,direction:d,style:h,width:f,useIsScrolling:m,itemData:g,rowClassName:v,onRow:x,children:C,rowKey:S,itemKey:y=I}=this.props,{isScrolling:_}=this.state,R={},b={};let M;if(o>0&&u>0){const[e,t]=this._getHorizontalRangeToRender(),[o,r]=this._getVerticalRangeToRender();M=this._renderFixedColumns(o,r);for(let i=o;i<=r;i++){const o=g[i],r=v?v(o,i):void 0,l=x?x(o,i):void 0,s=p(S)?S(o):S??`${i}`,a=this._getItemStyle(i,this._firstUnFixedColumn),c=this._firstUnFixedColumn,u=this._firstRightFixedColumn,d=[];for(let o=e;o<=t;o++){if(o<c||o>u-1)continue;const e=y({columnIndex:o,data:g,rowIndex:i}),t=this._getItemStyle(i,o);d[o]=n(C,{columnIndex:o,data:g,isScrolling:m?_:void 0,key:e,rowIndex:i,style:t})}R[i]=d,b[i]={...l,key:s,style:{...l?.style,top:a.top},className:w("virtial-grid-row",r,l?.className)}}}const T=Q(this.props,this._instanceProps),F=X(this.props,this._instanceProps),O=Object.entries(b).map((([t,n])=>{const{top:o,left:r}=n.style||{},i=M?M[t]:[],l=i[0],s=i[1],a=Object.values(R[t]);return e.createElement("div",{...n},a,e.createElement("div",{className:"fixed-virtial-grid-row-columns",style:{top:o,left:r,width:F}},l&&l.length>0&&e.createElement("div",{className:"fixed-virtial-grid-row-left-columns"},l),s&&s.length>0&&e.createElement("div",{className:"fixed-virtial-grid-row-right-columns"},s)))})),W=this._leftFixedColumnsWidth>0,E=this._rightFixedColumnsWidth>0;return n(a||c||"div",{className:w(t,{"has-fixed-left-column":W,"has-fixed-right-column":E}),onScroll:this._onScroll,ref:this._outerRefSetter,style:{position:"relative",height:r,width:f,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:d,...h}},n(l||s||"div",{children:O,ref:i,style:{height:T,pointerEvents:_?"none":void 0,width:F}}))}componentDidUpdate(e,t,n){e.columnGetter===this.props.columnGetter&&e.columnCount===this.props.columnCount&&e.columnWidth===this.props.columnWidth||this._updateFixedColumnsVars(),super.componentDidUpdate(e,t,n)}}const ne=t=>{const{ref:n,dataSource:o,className:h,columns:f,rowHeight:v,scroll:x,gridRef:C,outerGridRef:I,onScroll:y,onChange:_,components:R,locale:b,showHeader:M,rerenderFixedColumnOnHorizontalScroll:T,...F}=t,O=r(null),W=r(null),[E]=i((()=>({get scrollLeft(){return W.current?W.current?.state.scrollLeft:0},set scrollLeft(e){if(W.current){if(W.current.state.scrollLeft==e)return;W.current.scrollTo({scrollLeft:e})}}}))),P=l((e=>{if(!1!==M&&!R?.header&&e){const t=e.querySelector(".ant-table .ant-table-header");if(t){const e=t.querySelectorAll(".ant-table-thead .ant-table-cell");let n=0;for(let t=0;t<e.length;t++){n+=e[t].getBoundingClientRect().width}t.style.maxWidth=`${n}px`;let o=0,r=0;for(let t=0;t<e.length;t++){const n=e[t];if(!n.classList.contains("ant-table-cell-fix-left"))break;{const e=n.getBoundingClientRect().width;n.style.left=`${o}px`,o+=e}}for(let t=e.length-1;t>-1;t--){const n=e[t];if(!n.classList.contains("ant-table-cell-fix-right"))break;{const e=n.getBoundingClientRect().width;n.style.right=`${r}px`,r+=e}}}}}),[x.x,x.y,x.scrollToFirstRowOnChange,R?.header,M]),L=l(((e=0,t=0)=>{P(O.current),x.scrollToFirstRowOnChange&&(E.scrollLeft=0),W.current?.resetAfterIndices({columnIndex:e,rowIndex:t,shouldForceUpdate:!0})}),[x.scrollToFirstRowOnChange,E,P]),N=l(((e,t,n,o)=>{P(O.current),_&&_(e,t,n,o),x.scrollToFirstRowOnChange&&L()}),[x.scrollToFirstRowOnChange,_,L,P]),[z,D,k,A]=s((()=>{let t=0;const n=[],o=[];f.forEach(((e,r)=>{t>1?t--:(t=e.overlap??0,n.push(e),o.push(r))}));return[n,o,e=>n[e],t=>{const{columnIndex:r}=t,i=o[r],l=n[r];return e.createElement(S,{...t,originalColumnIndex:i,column:l})}]}),[f]),H=s((()=>p(v)?v:()=>v),[v]),{renderEmpty:j}=e.useContext(c.ConfigContext),U=s((()=>{const t=b&&b.emptyText||j?.("Table")||e.createElement(u,{image:u.PRESENTED_IMAGE_SIMPLE}),n="function"==typeof t?t():t;return e.createElement("div",{className:"virtual-grid-empty"},n)}),[b?.emptyText,j]),V=l(((t,n)=>{const{ref:o,scrollbarSize:r,onScroll:i}=n;P(O.current),m(E,o);const l=e=>H(t[e]),s=function(e,t,n){if(n<0)return 0;if(p(e)){let t=0;for(;n>-1;n--)t+=e(n);return t}return n*e}(l,0,t.length-1),a=e=>{const t=z[e],{width:n,overlap:o}=t;if(o&&o>0){let t=n,i=D[e];for(let e=1;e<o;e++)i++,t+=f[i].width;return i===f.length-1?t-r:t}return s>=x.y&&e===z.length-1?n-r:n},c=function(e,t){if(t<0)return 0;if(p(e)){let n=0;for(;t-- >0;)n+=e(t);return n}return e+t*e}(a,z.length-1),u=t.length>0;return e.createElement("div",{className:"virtual-grid-wrap"},!u&&U,e.createElement(te,{useIsScrolling:!0,ref:g(C),outerRef:I,className:"virtual-grid",rerenderFixedColumnOnHorizontalScroll:T,estimatedColumnWidth:c/z.length,estimatedRowHeight:s/t.length,width:x.x,height:x.y,columnCount:z.length,rowCount:t.length,rowHeight:l,columnWidth:a,itemData:t,columnGetter:k,onScroll:e=>{i&&i({scrollLeft:e.scrollLeft}),y&&y(e)}},A))}),[]);return a((()=>P(O.current)),[P,f,M,R?.header]),e.createElement(d,{...F,ref:e=>{m(e,n,O),P(e)},locale:b,showHeader:M,className:w("virtual-table",h),columns:f,dataSource:o,scroll:x,components:{...R,body:V},onChange:N})};export{te as Grid,ne as VirtualTable,ne as default};
//# sourceMappingURL=index.js.map
